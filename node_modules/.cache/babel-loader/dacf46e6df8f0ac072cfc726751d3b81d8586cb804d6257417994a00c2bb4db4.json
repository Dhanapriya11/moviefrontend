{"ast":null,"code":"import _objectSpread from\"D:/bookmyshow/bookmyshow/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// API Service - Handles all backend API calls\n// Use Render backend by default; allow override via REACT_APP_API_URL\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'https://servermovie-j6nj.onrender.com/api';// Get token from localStorage\nconst getToken=()=>{return localStorage.getItem('token');};// API request helper\nconst apiRequest=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=getToken();const config=_objectSpread(_objectSpread({},options),{},{headers:_objectSpread(_objectSpread({'Content-Type':'application/json'},token&&{Authorization:\"Bearer \".concat(token)}),options.headers)});try{const response=await fetch(\"\".concat(API_BASE_URL).concat(endpoint),config);// Handle network errors\nif(!response.ok){let errorMessage='Something went wrong';try{const errorData=await response.json();errorMessage=errorData.message||errorMessage;}catch(e){// If response is not JSON, use status text\nerrorMessage=response.statusText||errorMessage;}throw new Error(errorMessage);}const data=await response.json();return data;}catch(error){// Handle network connection errors\nif(error.message==='Failed to fetch'||error.message.includes('NetworkError')){throw new Error('Cannot connect to server. Please make sure the backend server URL is correct and running.');}throw error;}};// Auth API\nexport const authAPI={register:async(name,email,password)=>{return apiRequest('/auth/register',{method:'POST',body:JSON.stringify({name,email,password})});},login:async(email,password)=>{return apiRequest('/auth/login',{method:'POST',body:JSON.stringify({email,password})});}};// Movies API\nexport const moviesAPI={getMovies:async()=>{return apiRequest('/movies');},searchMovies:async query=>{return apiRequest(\"/movies/search?q=\".concat(encodeURIComponent(query)));}};// Bookings API\nexport const bookingsAPI={createBooking:async(movieId,location,seats,showtime,showDate)=>{return apiRequest('/bookings',{method:'POST',body:JSON.stringify({movieId,location,seats,showtime,showDate})});},getMyBookings:async()=>{return apiRequest('/bookings/my');}};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","getToken","localStorage","getItem","apiRequest","endpoint","options","arguments","length","undefined","token","config","_objectSpread","headers","Authorization","concat","response","fetch","ok","errorMessage","errorData","json","message","e","statusText","Error","data","error","includes","authAPI","register","name","email","password","method","body","JSON","stringify","login","moviesAPI","getMovies","searchMovies","query","encodeURIComponent","bookingsAPI","createBooking","movieId","location","seats","showtime","showDate","getMyBookings"],"sources":["D:/bookmyshow/bookmyshow/client/src/services/api.js"],"sourcesContent":["// API Service - Handles all backend API calls\r\n\r\n// Use Render backend by default; allow override via REACT_APP_API_URL\r\nconst API_BASE_URL =\r\n  process.env.REACT_APP_API_URL || 'https://servermovie-j6nj.onrender.com/api';\r\n\r\n// Get token from localStorage\r\nconst getToken = () => {\r\n  return localStorage.getItem('token');\r\n};\r\n\r\n// API request helper\r\nconst apiRequest = async (endpoint, options = {}) => {\r\n  const token = getToken();\r\n  const config = {\r\n    ...options,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(token && { Authorization: `Bearer ${token}` }),\r\n      ...options.headers\r\n    }\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\r\n    \r\n    // Handle network errors\r\n    if (!response.ok) {\r\n      let errorMessage = 'Something went wrong';\r\n      try {\r\n        const errorData = await response.json();\r\n        errorMessage = errorData.message || errorMessage;\r\n      } catch (e) {\r\n        // If response is not JSON, use status text\r\n        errorMessage = response.statusText || errorMessage;\r\n      }\r\n      throw new Error(errorMessage);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    // Handle network connection errors\r\n    if (error.message === 'Failed to fetch' || error.message.includes('NetworkError')) {\r\n      throw new Error('Cannot connect to server. Please make sure the backend server URL is correct and running.');\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  register: async (name, email, password) => {\r\n    return apiRequest('/auth/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ name, email, password })\r\n    });\r\n  },\r\n\r\n  login: async (email, password) => {\r\n    return apiRequest('/auth/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password })\r\n    });\r\n  }\r\n};\r\n\r\n// Movies API\r\nexport const moviesAPI = {\r\n  getMovies: async () => {\r\n    return apiRequest('/movies');\r\n  },\r\n\r\n  searchMovies: async (query) => {\r\n    return apiRequest(`/movies/search?q=${encodeURIComponent(query)}`);\r\n  }\r\n};\r\n\r\n// Bookings API\r\nexport const bookingsAPI = {\r\n  createBooking: async (movieId, location, seats, showtime, showDate) => {\r\n    return apiRequest('/bookings', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ movieId, location, seats, showtime, showDate })\r\n    });\r\n  },\r\n\r\n  getMyBookings: async () => {\r\n    return apiRequest('/bookings/my');\r\n  }\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}