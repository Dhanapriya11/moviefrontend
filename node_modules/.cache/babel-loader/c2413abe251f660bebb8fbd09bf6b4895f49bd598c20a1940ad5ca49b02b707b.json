{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{moviesAPI}from'../services/api';import'./MovieSearchPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MovieSearchPage=()=>{const[movies,setMovies]=useState([]);const[filteredMovies,setFilteredMovies]=useState([]);const[searchQuery,setSearchQuery]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{fetchMovies();},[]);useEffect(()=>{const performSearch=async()=>{if(searchQuery.trim()===''){setFilteredMovies(movies);}else{try{setLoading(true);const response=await moviesAPI.searchMovies(searchQuery);setFilteredMovies(response.data);}catch(err){setError(err.message||'Failed to search movies');setFilteredMovies([]);}finally{setLoading(false);}}};performSearch();},[searchQuery,movies]);const fetchMovies=async()=>{try{setLoading(true);const response=await moviesAPI.getMovies();setMovies(response.data);setFilteredMovies(response.data);}catch(err){setError(err.message||'Failed to fetch movies');}finally{setLoading(false);}};const handleMovieSelect=movie=>{navigate('/booking',{state:{movie}});};const handleGoToBookings=()=>{navigate('/my-bookings');};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');navigate('/login');};const user=JSON.parse(localStorage.getItem('user')||'{}');if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"movie-search-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading movies...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-search-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"movie-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"BookMyShow\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"welcome-text\",children:[\"Welcome, \",user.name||'User',\"!\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGoToBookings,className:\"logout-btn\",children:\"My Bookings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search Movies\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by movie name...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"search-input\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-grid\",children:filteredMovies.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:searchQuery?'No movies found matching your search.':'No movies available.'}):filteredMovies.map(movie=>/*#__PURE__*/_jsxs(\"div\",{className:\"movie-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"movie-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"locations\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Available in:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"location-tags\",children:movie.locations.map((location,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"location-tag\",children:location},index))})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMovieSelect(movie),className:\"book-btn\",children:\"Book Now\"})]},movie._id))})]})]});};export default MovieSearchPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","moviesAPI","jsx","_jsx","jsxs","_jsxs","MovieSearchPage","movies","setMovies","filteredMovies","setFilteredMovies","searchQuery","setSearchQuery","loading","setLoading","error","setError","navigate","fetchMovies","performSearch","trim","response","searchMovies","data","err","message","getMovies","handleMovieSelect","movie","state","handleGoToBookings","handleLogout","localStorage","removeItem","user","JSON","parse","getItem","className","children","name","onClick","type","placeholder","value","onChange","e","target","length","map","title","locations","location","index","_id"],"sources":["D:/bookmyshow/bookmyshow/client/src/pages/MovieSearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { moviesAPI } from '../services/api';\r\nimport './MovieSearchPage.css';\r\n\r\nconst MovieSearchPage = () => {\r\n  const [movies, setMovies] = useState([]);\r\n  const [filteredMovies, setFilteredMovies] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchMovies();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const performSearch = async () => {\r\n      if (searchQuery.trim() === '') {\r\n        setFilteredMovies(movies);\r\n      } else {\r\n        try {\r\n          setLoading(true);\r\n          const response = await moviesAPI.searchMovies(searchQuery);\r\n          setFilteredMovies(response.data);\r\n        } catch (err) {\r\n          setError(err.message || 'Failed to search movies');\r\n          setFilteredMovies([]);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n    performSearch();\r\n  }, [searchQuery, movies]);\r\n\r\n  const fetchMovies = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await moviesAPI.getMovies();\r\n      setMovies(response.data);\r\n      setFilteredMovies(response.data);\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to fetch movies');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMovieSelect = (movie) => {\r\n    navigate('/booking', { state: { movie } });\r\n  };\r\n\r\n  const handleGoToBookings = () => {\r\n    navigate('/my-bookings');\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/login');\r\n  };\r\n\r\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"movie-search-container\">\r\n        <div className=\"loading\">Loading movies...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"movie-search-container\">\r\n      <header className=\"movie-header\">\r\n        <h1>BookMyShow</h1>\r\n        <div className=\"header-actions\">\r\n          <span className=\"welcome-text\">Welcome, {user.name || 'User'}!</span>\r\n          <button onClick={handleGoToBookings} className=\"logout-btn\">\r\n            My Bookings\r\n          </button>\r\n          <button onClick={handleLogout} className=\"logout-btn\">\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"movie-content\">\r\n        <div className=\"search-section\">\r\n          <h2>Search Movies</h2>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by movie name...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"search-input\"\r\n          />\r\n        </div>\r\n\r\n        {error && <div className=\"error-message\">{error}</div>}\r\n\r\n        <div className=\"movies-grid\">\r\n          {filteredMovies.length === 0 ? (\r\n            <div className=\"no-results\">\r\n              {searchQuery ? 'No movies found matching your search.' : 'No movies available.'}\r\n            </div>\r\n          ) : (\r\n            filteredMovies.map((movie) => (\r\n              <div key={movie._id} className=\"movie-card\">\r\n                <div className=\"movie-info\">\r\n                  <h3>{movie.title}</h3>\r\n                  <div className=\"locations\">\r\n                    <strong>Available in:</strong>\r\n                    <div className=\"location-tags\">\r\n                      {movie.locations.map((location, index) => (\r\n                        <span key={index} className=\"location-tag\">\r\n                          {location}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleMovieSelect(movie)}\r\n                  className=\"book-btn\"\r\n                >\r\n                  Book Now\r\n                </button>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MovieSearchPage;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}