{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{bookingsAPI}from'../services/api';import'./MyBookingsPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyBookingsPage=()=>{const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchBookings=async()=>{try{setLoading(true);const response=await bookingsAPI.getMyBookings();setBookings(response.data||[]);}catch(err){setError(err.message||'Failed to fetch bookings');}finally{setLoading(false);}};fetchBookings();},[]);const handleBackToMovies=()=>{navigate('/movies');};return/*#__PURE__*/_jsxs(\"div\",{className:\"my-bookings-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"movie-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToMovies,className:\"logout-btn\",children:\"Back to Movies\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-bookings-content\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading your bookings...\"}),error&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!loading&&!error&&(bookings.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-bookings\",children:\"You have no bookings yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"bookings-list\",children:bookings.map(booking=>/*#__PURE__*/_jsxs(\"div\",{className:\"booking-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-header-row\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"booking-movie\",children:booking.movie}),/*#__PURE__*/_jsxs(\"span\",{className:\"booking-seats\",children:[booking.seats,\" seat\",booking.seats>1?'s':'']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking-details-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-label\",children:\"Location\"}),/*#__PURE__*/_jsx(\"span\",{className:\"booking-value\",children:booking.location})]}),booking.showtime&&/*#__PURE__*/_jsxs(\"div\",{className:\"booking-details-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-label\",children:\"Showtime\"}),/*#__PURE__*/_jsx(\"span\",{className:\"booking-value\",children:booking.showtime})]}),booking.showDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"booking-details-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-label\",children:\"Show Date\"}),/*#__PURE__*/_jsx(\"span\",{className:\"booking-value\",children:new Date(booking.showDate).toLocaleDateString()})]}),typeof booking.totalAmount==='number'&&/*#__PURE__*/_jsxs(\"div\",{className:\"booking-details-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-label\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"booking-value\",children:[\"\\u20B9\",booking.totalAmount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking-details-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-label\",children:\"Booked On\"}),/*#__PURE__*/_jsx(\"span\",{className:\"booking-value\",children:new Date(booking.createdAt).toLocaleString()})]})]},booking.bookingId))}))]})]});};export default MyBookingsPage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","bookingsAPI","jsx","_jsx","jsxs","_jsxs","MyBookingsPage","bookings","setBookings","loading","setLoading","error","setError","navigate","fetchBookings","response","getMyBookings","data","err","message","handleBackToMovies","className","children","onClick","length","map","booking","movie","seats","location","showtime","showDate","Date","toLocaleDateString","totalAmount","createdAt","toLocaleString","bookingId"],"sources":["D:/bookmyshow/bookmyshow/client/src/pages/MyBookingsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { bookingsAPI } from '../services/api';\r\nimport './MyBookingsPage.css';\r\n\r\nconst MyBookingsPage = () => {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchBookings = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await bookingsAPI.getMyBookings();\r\n        setBookings(response.data || []);\r\n      } catch (err) {\r\n        setError(err.message || 'Failed to fetch bookings');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  const handleBackToMovies = () => {\r\n    navigate('/movies');\r\n  };\r\n\r\n  return (\r\n    <div className=\"my-bookings-container\">\r\n      <header className=\"movie-header\">\r\n        <h1>My Bookings</h1>\r\n        <div className=\"header-actions\">\r\n          <button onClick={handleBackToMovies} className=\"logout-btn\">\r\n            Back to Movies\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"my-bookings-content\">\r\n        {loading && <div className=\"loading\">Loading your bookings...</div>}\r\n        {error && !loading && <div className=\"error-message\">{error}</div>}\r\n\r\n        {!loading && !error && (\r\n          bookings.length === 0 ? (\r\n            <div className=\"no-bookings\">You have no bookings yet.</div>\r\n          ) : (\r\n            <div className=\"bookings-list\">\r\n              {bookings.map((booking) => (\r\n                <div key={booking.bookingId} className=\"booking-card\">\r\n                  <div className=\"booking-header-row\">\r\n                    <h2 className=\"booking-movie\">{booking.movie}</h2>\r\n                    <span className=\"booking-seats\">{booking.seats} seat{booking.seats > 1 ? 's' : ''}</span>\r\n                  </div>\r\n                  <div className=\"booking-details-row\">\r\n                    <span className=\"booking-label\">Location</span>\r\n                    <span className=\"booking-value\">{booking.location}</span>\r\n                  </div>\r\n                  {booking.showtime && (\r\n                    <div className=\"booking-details-row\">\r\n                      <span className=\"booking-label\">Showtime</span>\r\n                      <span className=\"booking-value\">{booking.showtime}</span>\r\n                    </div>\r\n                  )}\r\n                  {booking.showDate && (\r\n                    <div className=\"booking-details-row\">\r\n                      <span className=\"booking-label\">Show Date</span>\r\n                      <span className=\"booking-value\">\r\n                        {new Date(booking.showDate).toLocaleDateString()}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  {typeof booking.totalAmount === 'number' && (\r\n                    <div className=\"booking-details-row\">\r\n                      <span className=\"booking-label\">Total</span>\r\n                      <span className=\"booking-value\">â‚¹{booking.totalAmount}</span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"booking-details-row\">\r\n                    <span className=\"booking-label\">Booked On</span>\r\n                    <span className=\"booking-value\">\r\n                      {new Date(booking.createdAt).toLocaleString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyBookingsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}